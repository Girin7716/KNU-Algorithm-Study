# 로봇 청소기

## 풀이 방법

처음에는 그냥 bfs를 통해 문제를 풀어보았지만, `틀렸습니다`가 나왔다. 그 이유를 찾아보니 아래와 같은 예제의 경우 처음에 올바른 경로로 가지 않은경우 오류가 발생한다.

```text
4 4
..o.
****
****
.**.
```

그러므로, 쓰레기를 처리한 상태라는 것을 알 필요가 있다.

마침 쓰레기의 최대 개수가 10개이하이므로, 비트마스크를 사용하기로 했다. 비트마스크는 개수가 15,31개 이하면 비트마스크 사용을 의심해봐야하고, 최대 63개까지 효율적이라고 한다.

그리하여 전과 비슷하게 bfs를 하나, visited[state][x][y]로 만들어준다. 여기서 state는 몇번 쓰레기를 주웠는지를 저장한 상태가 된다.

예를들어, 
```text
4 4
..o.
****
****
.**.
```
이러한 입력이 주어지면 해당 입력을 아래와 같이 바꿔 board에 저장한다.
```text
0 0 0 0
1 2 3 4
5 6 7 8
0 9 10 0
```
즉, 쓰레기에 번호를 부여해준다.(만약 'x'(벽)일 경우, -1 대입)

그 후, bfs를 하다가 쓰레기를 만날 경우 해당 쓰레기를 처리했다는 의미로 `new_state = new_state | (1<<board[nx][ny]-1)`를 해준다. 그 후, visited[new_state][nx][ny]를 넣어준다.

마지막으로, bfs에서 원소를 꺼냈을때 state가 fullstate, 즉 모든 쓰레기를 주운 상태와 같다면 bfs를 종료하고 move_cnt를 return한다.

반대로, 큐의 모든 원소를 다 꺼내어 더이상 꺼낼 원소가 없어지면 쓰레기를 주울 수 없다는 의미이므로 return -1을 하면 된다.

## 느낀점
어떻게 풀어야겠는지 감을 잡지 못해, `이채현` 한테 설명을 듣고 코드를 보면서 이해했다. 덕분에 비트마스크 문제 접근을 어떻게 해야하는지 알게 되었다.